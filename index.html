<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Rosco de Geometría - Pasapalabra</title>

<style>
body{
  font-family:Arial, sans-serif;
  text-align:center;
  background-color:#f0f8ff;
}

/* ---------- PANTALLA BIENVENIDA ---------- */

#welcome-screen{
  margin-top:40px;
}

#welcome-image{
  width:400px;   /* MÁS GRANDE */
  max-width:90%;
  margin-bottom:30px;
}

/* ---------- JUEGO ---------- */

#game-container{
  display:none;
}

#rosco{
  position:relative;
  width:500px;
  height:500px;
  margin:20px auto;
}

.letter{
  width:50px;
  height:50px;
  background-color:blue;
  color:white;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  position:absolute;
  font-weight:bold;
}
  
#hint{
  font-size: 1.8em;   /* Tamaño más grande */
  font-weight: bold;  /* Opcional: más visible */
  margin: 20px;
}

/* Imagen central del rosco */
#center-image{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  width:160px;
  height:160px;
  border-radius:50%;
  object-fit:cover;
}

button{
  padding:10px 15px;
  margin:5px;
  font-size:1em;
}

#timer{
  font-size:1.5em;
  font-weight:bold;
}

#score{
  font-size:1.2em;
  font-weight:bold;
  margin:10px;
}

/* CAJA DE RESPUESTA MÁS GRANDE */
#answer{
  width:400px;
  max-width:90%;
  padding:12px;
  font-size:1.3em;
  text-align:center;
  border-radius:8px;
}

#final-message{
  margin-top:20px;
}
</style>
</head>

<body>

<h1>Rosco de Geometría</h1>

<!-- ---------- BIENVENIDA ---------- -->

<div id="welcome-screen">
  <img id="welcome-image" src="bienvenida.png" alt="Bienvenida">
  <br>
  <button onclick="showTimeOptions()">Jugar</button>

  <div id="time-selection" style="display:none;">
    <p>Elige duración:</p>
    <button onclick="startGame(300)">5 minutos</button>
    <button onclick="startGame(600)">10 minutos</button>
  </div>
</div>

<!-- ---------- JUEGO ---------- -->

<div id="game-container">

  <div id="timer"></div>
  <div id="score"></div>

  <div id="rosco">
    <!-- Imagen central -->
    <img id="center-image" src="IMG_2793.png" alt="Centro">
  </div>

  <p id="hint"></p>

  <div id="answer-area">
    <input type="text" id="answer" placeholder="Tu respuesta...">
    <div>
      <button onclick="checkAnswer()">Comprobar</button>
      <button onclick="passWord()">Pasapalabra</button>
    </div>
  </div>

  <div id="final-message"></div>

</div>

<script>

const words={
A:{answer:"ángulo",hint:"Figura formada por dos semirrectas con un mismo origen."},
B:{answer:"bisectriz",hint:"Recta que divide un ángulo en dos partes iguales."},
C:{answer:"circunferencia",hint:"Línea curva cerrada cuyos puntos están a igual distancia de un punto central."},
D:{answer:"diámetro",hint:"Segmento que une dos puntos y pasa por el centro."},
E:{answer:"esfera",hint:"Cuerpo geométrico perfectamente redondo en 3D."},
F:{answer:"figura",hint:"Representación visual geométrica."},
G:{answer:"geometría",hint:"Parte de las matemáticas que estudia el espacio."},
H:{answer:"heptágono",hint:"Polígono de siete lados."},
I:{answer:"isósceles",hint:"Triángulo con dos lados iguales."},
J:{answer:"eje",hint:"Contiene la J: Línea de referencia."},
K:{answer:"kilómetro",hint:"Múltiplo de 1000 metros."},
L:{answer:"paralelas",hint:"Contiene la L: Rectas que no se cortan."},
M:{answer:"mediana",hint:"Segmento que une vértice con punto medio."},
N:{answer:"pentágono",hint:"Contiene la N: Polígono de cinco lados."},
O:{answer:"octógono",hint:"Polígono de ocho lados."},
P:{answer:"paralelogramo",hint:"Cuadrilátero con lados paralelos."},
Q:{answer:"cuadrado",hint:"Cuatro lados iguales."},
R:{answer:"radio",hint:"Segmento del centro a la circunferencia."},
S:{answer:"segmento",hint:"Parte de recta entre dos puntos."},
T:{answer:"triángulo",hint:"Figura de tres lados."},
U:{answer:"unidad",hint:"Magnitud de referencia."},
V:{answer:"vértice",hint:"Punto donde se unen lados."},
W:{answer:"web",hint:"Lugar en línea."},
X:{answer:"x",hint:"Incógnita matemática."},
Y:{answer:"y",hint:"Eje vertical."},
Z:{answer:"trapezoide",hint:"Contiene la Z: Cuadrilátero sin lados paralelos."}
};

let letters=[];
let current=0;
let timer;
let timeLeft;
let correct=0;
let wrong=0;

function normalize(text){
  return text.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();
}

function showTimeOptions(){
  document.querySelector("#welcome-screen button").style.display = "none";
  document.getElementById("time-selection").style.display = "block";
}

function startGame(seconds){
  document.getElementById("welcome-screen").style.display="none";
  document.getElementById("game-container").style.display="block";

  letters=Object.keys(words);
  correct=0;
  wrong=0;
  current=0;
  timeLeft=seconds;

  updateScore();
  createRosco();
  nextQuestion();

  timer=setInterval(updateTimer,1000);
}

function updateScore(){
  document.getElementById("score").innerText="Aciertos: "+correct;
}

function createRosco(){
  const rosco=document.getElementById("rosco");

  // Mantener imagen central
  rosco.innerHTML='<img id="center-image" src="IMG_2793.png" alt="Centro">';

  const radius=200,centerX=250,centerY=250;

  letters.forEach((letter,i)=>{
    const angle=(2*Math.PI/letters.length)*i;
    const x=centerX+radius*Math.sin(angle);
    const y=centerY-radius*Math.cos(angle);

    const btn=document.createElement("div");
    btn.className="letter";
    btn.innerText=letter;
    btn.style.left=`${x-25}px`;
    btn.style.top=`${y-25}px`;
    btn.id=`btn-${letter}`;

    rosco.appendChild(btn);
  });
}

function updateTimer(){
  timeLeft--;
  let min=Math.floor(timeLeft/60).toString().padStart(2,'0');
  let sec=(timeLeft%60).toString().padStart(2,'0');
  document.getElementById("timer").innerText=`Tiempo: ${min}:${sec}`;
  if(timeLeft<=0){
    clearInterval(timer);
    endGame();
  }
}

function nextQuestion(){
  if(letters.length===0){ endGame(); return; }
  document.getElementById("hint").innerText=words[letters[current]].hint;
}

function checkAnswer(){
  let letter=letters[current];
  let input=normalize(document.getElementById("answer").value.trim());
  let correctAnswer=normalize(words[letter].answer);
  const btn=document.getElementById(`btn-${letter}`);

  if(input===correctAnswer){
    btn.style.backgroundColor="green";
    correct++;
  }else{
    btn.style.backgroundColor="red";
    wrong++;
  }

  updateScore();
  document.getElementById("answer").value="";
  letters.splice(current,1);

  if(letters.length>0){
    current%=letters.length;
    nextQuestion();
  }else{
    clearInterval(timer);
    endGame();
  }
}

function passWord(){
  const btn=document.getElementById(`btn-${letters[current]}`);
  btn.style.backgroundColor="yellow";
  current=(current+1)%letters.length;
  document.getElementById("answer").value="";
  nextQuestion();
}

function endGame(){
  document.getElementById("answer-area").style.display="none";
  document.getElementById("final-message").innerHTML=
  `<h2>Juego terminado</h2>
   <p>Aciertos: ${correct}</p>
   <p>Errores: ${wrong}</p>
   <button onclick="location.reload()">Intentar de nuevo</button>`;
}

</script>
</body>
</html>
